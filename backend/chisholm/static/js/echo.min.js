!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t)}):"object"==typeof exports?module.exports=e:t.echo=e(t)}(this,function(a){"use strict";var u,t,c,d,l,i={},f=function(){},s=function(t,e){if(null===t.offsetParent)return!1;var n=t.getBoundingClientRect();return n.right>=e.l&&n.bottom>=e.t&&n.left<=e.r&&n.top<=e.b},h=function(){!d&&t||(clearTimeout(t),t=setTimeout(function(){i.render(),t=null},c))};return i.init=function(t){var e=(t=t||{}).offset||0,n=t.offsetVertical||e,o=t.offsetHorizontal||e,r=function(t,e){return parseInt(t||e,10)};u={t:r(t.offsetTop,n),b:r(t.offsetBottom,n),l:r(t.offsetLeft,o),r:r(t.offsetRight,o)},c=r(t.throttle,250),d=!1!==t.debounce,l=!!t.unload,f=t.callback||f,i.render(),document.addEventListener?(a.addEventListener("scroll",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onscroll",h),a.attachEvent("onload",h))},i.render=function(){for(var t,e,n=document.querySelectorAll("img[data-echo], [data-echo-background]"),o=n.length,r={l:0-u.l,t:0-u.t,b:(a.innerHeight||document.documentElement.clientHeight)+u.b,r:(a.innerWidth||document.documentElement.clientWidth)+u.r},c=0;c<o;c++)e=n[c],s(e,r)?(l&&e.setAttribute("data-echo-placeholder",e.src),null!==e.getAttribute("data-echo-background")?e.style.backgroundImage="url("+e.getAttribute("data-echo-background")+")":e.src=e.getAttribute("data-echo"),l||(e.removeAttribute("data-echo"),e.removeAttribute("data-echo-background")),f(e,"load")):l&&(t=e.getAttribute("data-echo-placeholder"))&&(null!==e.getAttribute("data-echo-background")?e.style.backgroundImage="url("+t+")":e.src=t,e.removeAttribute("data-echo-placeholder"),f(e,"unload"));o||i.detach()},i.detach=function(){document.removeEventListener?a.removeEventListener("scroll",h):a.detachEvent("onscroll",h),clearTimeout(t)},i});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVjaG8ubWluLmpzIl0sIm5hbWVzIjpbInQiLCJlIiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIm1vZHVsZSIsImVjaG8iLCJ0aGlzIiwiYSIsInUiLCJjIiwiZCIsImwiLCJpIiwiZiIsInMiLCJvZmZzZXRQYXJlbnQiLCJuIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicmlnaHQiLCJib3R0b20iLCJsZWZ0IiwiciIsInRvcCIsImIiLCJoIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInJlbmRlciIsImluaXQiLCJvZmZzZXQiLCJvZmZzZXRWZXJ0aWNhbCIsIm8iLCJvZmZzZXRIb3Jpem9udGFsIiwicGFyc2VJbnQiLCJvZmZzZXRUb3AiLCJvZmZzZXRCb3R0b20iLCJvZmZzZXRMZWZ0Iiwib2Zmc2V0UmlnaHQiLCJ0aHJvdHRsZSIsImRlYm91bmNlIiwidW5sb2FkIiwiY2FsbGJhY2siLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJhdHRhY2hFdmVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsZW5ndGgiLCJpbm5lckhlaWdodCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudEhlaWdodCIsImlubmVyV2lkdGgiLCJjbGllbnRXaWR0aCIsInNldEF0dHJpYnV0ZSIsInNyYyIsImdldEF0dHJpYnV0ZSIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwicmVtb3ZlQXR0cmlidXRlIiwiZGV0YWNoIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRldGFjaEV2ZW50Il0sIm1hcHBpbmdzIjoiQ0FBQyxTQUFTQSxFQUFFQyxHQUFHLG1CQUFtQkMsUUFBUUEsT0FBT0MsSUFBSUQsT0FBTyxXQUFXLE9BQU9ELEVBQUVELEtBQUssaUJBQWlCSSxRQUFRQyxPQUFPRCxRQUFRSCxFQUFFRCxFQUFFTSxLQUFLTCxFQUFFRCxHQUF2SSxDQUEySU8sS0FBSyxTQUFTQyxHQUFHLGFBQWEsSUFBSUMsRUFBRVQsRUFBRVUsRUFBRUMsRUFBRUMsRUFBRUMsS0FBS0MsRUFBRSxhQUFhQyxFQUFFLFNBQVNmLEVBQUVDLEdBQUcsR0FBRyxPQUFPRCxFQUFFZ0IsYUFBYSxPQUFNLEVBQUcsSUFBSUMsRUFBRWpCLEVBQUVrQix3QkFBd0IsT0FBT0QsRUFBRUUsT0FBT2xCLEVBQUVXLEdBQUdLLEVBQUVHLFFBQVFuQixFQUFFRCxHQUFHaUIsRUFBRUksTUFBTXBCLEVBQUVxQixHQUFHTCxFQUFFTSxLQUFLdEIsRUFBRXVCLEdBQUdDLEVBQUUsWUFBWWQsR0FBR1gsSUFBSTBCLGFBQWExQixHQUFHQSxFQUFFMkIsV0FBVyxXQUFXZCxFQUFFZSxTQUFTNUIsRUFBRSxNQUFNVSxLQUFLLE9BQU9HLEVBQUVnQixLQUFLLFNBQVM3QixHQUFHLElBQUlDLEdBQUdELEVBQUVBLE9BQU84QixRQUFRLEVBQUViLEVBQUVqQixFQUFFK0IsZ0JBQWdCOUIsRUFBRStCLEVBQUVoQyxFQUFFaUMsa0JBQWtCaEMsRUFBRXFCLEVBQUUsU0FBU3RCLEVBQUVDLEdBQUcsT0FBT2lDLFNBQVNsQyxHQUFHQyxFQUFFLEtBQUtRLEdBQUdULEVBQUVzQixFQUFFdEIsRUFBRW1DLFVBQVVsQixHQUFHTyxFQUFFRixFQUFFdEIsRUFBRW9DLGFBQWFuQixHQUFHTCxFQUFFVSxFQUFFdEIsRUFBRXFDLFdBQVdMLEdBQUdWLEVBQUVBLEVBQUV0QixFQUFFc0MsWUFBWU4sSUFBSXRCLEVBQUVZLEVBQUV0QixFQUFFdUMsU0FBUyxLQUFLNUIsR0FBRSxJQUFLWCxFQUFFd0MsU0FBUzVCLElBQUlaLEVBQUV5QyxPQUFPM0IsRUFBRWQsRUFBRTBDLFVBQVU1QixFQUFFRCxFQUFFZSxTQUFTZSxTQUFTQyxrQkFBa0JwQyxFQUFFb0MsaUJBQWlCLFNBQVNuQixHQUFFLEdBQUlqQixFQUFFb0MsaUJBQWlCLE9BQU9uQixHQUFFLEtBQU1qQixFQUFFcUMsWUFBWSxXQUFXcEIsR0FBR2pCLEVBQUVxQyxZQUFZLFNBQVNwQixLQUFLWixFQUFFZSxPQUFPLFdBQVcsSUFBSSxJQUFJNUIsRUFBRUMsRUFBRWdCLEVBQUUwQixTQUFTRyxpQkFBaUIsMENBQTBDZCxFQUFFZixFQUFFOEIsT0FBT3pCLEdBQUdWLEVBQUUsRUFBRUgsRUFBRUcsRUFBRVosRUFBRSxFQUFFUyxFQUFFVCxFQUFFd0IsR0FBR2hCLEVBQUV3QyxhQUFhTCxTQUFTTSxnQkFBZ0JDLGNBQWN6QyxFQUFFZSxFQUFFRixHQUFHZCxFQUFFMkMsWUFBWVIsU0FBU00sZ0JBQWdCRyxhQUFhM0MsRUFBRWEsR0FBR1osRUFBRSxFQUFFQSxFQUFFc0IsRUFBRXRCLElBQUlULEVBQUVnQixFQUFFUCxHQUFHSyxFQUFFZCxFQUFFcUIsSUFBSVYsR0FBR1gsRUFBRW9ELGFBQWEsd0JBQXdCcEQsRUFBRXFELEtBQUssT0FBT3JELEVBQUVzRCxhQUFhLHdCQUF3QnRELEVBQUV1RCxNQUFNQyxnQkFBZ0IsT0FBT3hELEVBQUVzRCxhQUFhLHdCQUF3QixJQUFJdEQsRUFBRXFELElBQUlyRCxFQUFFc0QsYUFBYSxhQUFhM0MsSUFBSVgsRUFBRXlELGdCQUFnQixhQUFhekQsRUFBRXlELGdCQUFnQix5QkFBeUI1QyxFQUFFYixFQUFFLFNBQVNXLElBQUlaLEVBQUVDLEVBQUVzRCxhQUFhLDRCQUE0QixPQUFPdEQsRUFBRXNELGFBQWEsd0JBQXdCdEQsRUFBRXVELE1BQU1DLGdCQUFnQixPQUFPekQsRUFBRSxJQUFJQyxFQUFFcUQsSUFBSXRELEVBQUVDLEVBQUV5RCxnQkFBZ0IseUJBQXlCNUMsRUFBRWIsRUFBRSxXQUFXK0IsR0FBR25CLEVBQUU4QyxVQUFVOUMsRUFBRThDLE9BQU8sV0FBV2hCLFNBQVNpQixvQkFBb0JwRCxFQUFFb0Qsb0JBQW9CLFNBQVNuQyxHQUFHakIsRUFBRXFELFlBQVksV0FBV3BDLEdBQUdDLGFBQWExQixJQUFJYSIsImZpbGUiOiJlY2hvLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiFmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gZSh0KX0pOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWU6dC5lY2hvPWUodCl9KHRoaXMsZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHUsdCxjLGQsbCxpPXt9LGY9ZnVuY3Rpb24oKXt9LHM9ZnVuY3Rpb24odCxlKXtpZihudWxsPT09dC5vZmZzZXRQYXJlbnQpcmV0dXJuITE7dmFyIG49dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm4gbi5yaWdodD49ZS5sJiZuLmJvdHRvbT49ZS50JiZuLmxlZnQ8PWUuciYmbi50b3A8PWUuYn0saD1mdW5jdGlvbigpeyFkJiZ0fHwoY2xlYXJUaW1lb3V0KHQpLHQ9c2V0VGltZW91dChmdW5jdGlvbigpe2kucmVuZGVyKCksdD1udWxsfSxjKSl9O3JldHVybiBpLmluaXQ9ZnVuY3Rpb24odCl7dmFyIGU9KHQ9dHx8e30pLm9mZnNldHx8MCxuPXQub2Zmc2V0VmVydGljYWx8fGUsbz10Lm9mZnNldEhvcml6b250YWx8fGUscj1mdW5jdGlvbih0LGUpe3JldHVybiBwYXJzZUludCh0fHxlLDEwKX07dT17dDpyKHQub2Zmc2V0VG9wLG4pLGI6cih0Lm9mZnNldEJvdHRvbSxuKSxsOnIodC5vZmZzZXRMZWZ0LG8pLHI6cih0Lm9mZnNldFJpZ2h0LG8pfSxjPXIodC50aHJvdHRsZSwyNTApLGQ9ITEhPT10LmRlYm91bmNlLGw9ISF0LnVubG9hZCxmPXQuY2FsbGJhY2t8fGYsaS5yZW5kZXIoKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyPyhhLmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIixoLCExKSxhLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsaCwhMSkpOihhLmF0dGFjaEV2ZW50KFwib25zY3JvbGxcIixoKSxhLmF0dGFjaEV2ZW50KFwib25sb2FkXCIsaCkpfSxpLnJlbmRlcj1mdW5jdGlvbigpe2Zvcih2YXIgdCxlLG49ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImltZ1tkYXRhLWVjaG9dLCBbZGF0YS1lY2hvLWJhY2tncm91bmRdXCIpLG89bi5sZW5ndGgscj17bDowLXUubCx0OjAtdS50LGI6KGEuaW5uZXJIZWlnaHR8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpK3UuYixyOihhLmlubmVyV2lkdGh8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCkrdS5yfSxjPTA7YzxvO2MrKyllPW5bY10scyhlLHIpPyhsJiZlLnNldEF0dHJpYnV0ZShcImRhdGEtZWNoby1wbGFjZWhvbGRlclwiLGUuc3JjKSxudWxsIT09ZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWVjaG8tYmFja2dyb3VuZFwiKT9lLnN0eWxlLmJhY2tncm91bmRJbWFnZT1cInVybChcIitlLmdldEF0dHJpYnV0ZShcImRhdGEtZWNoby1iYWNrZ3JvdW5kXCIpK1wiKVwiOmUuc3JjPWUuZ2V0QXR0cmlidXRlKFwiZGF0YS1lY2hvXCIpLGx8fChlLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtZWNob1wiKSxlLnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtZWNoby1iYWNrZ3JvdW5kXCIpKSxmKGUsXCJsb2FkXCIpKTpsJiYodD1lLmdldEF0dHJpYnV0ZShcImRhdGEtZWNoby1wbGFjZWhvbGRlclwiKSkmJihudWxsIT09ZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWVjaG8tYmFja2dyb3VuZFwiKT9lLnN0eWxlLmJhY2tncm91bmRJbWFnZT1cInVybChcIit0K1wiKVwiOmUuc3JjPXQsZS5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLWVjaG8tcGxhY2Vob2xkZXJcIiksZihlLFwidW5sb2FkXCIpKTtvfHxpLmRldGFjaCgpfSxpLmRldGFjaD1mdW5jdGlvbigpe2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXI/YS5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsaCk6YS5kZXRhY2hFdmVudChcIm9uc2Nyb2xsXCIsaCksY2xlYXJUaW1lb3V0KHQpfSxpfSk7Il19
